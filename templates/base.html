<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>{% block title %}PlayersDB{% endblock %}</title>
  <!-- Link para a fonte Roboto do Google Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/css/bootstrap.min.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css">
  <style>
    /* Define Roboto como fonte padrão para todo o site */
    html {
      height: 100%;
    }
    body {
      font-family: 'Roboto', sans-serif;
      margin: 0;
      padding: 0;
      display: flex;
      flex-direction: column;
      min-height: 100vh;
      transition: background-color 0.3s, color 0.3s;
    }
    .container {
      flex: 1;
      margin-top: 80px;
    }
    .position-badge {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      width: 40px;
      height: 25px;
      border-radius: 8%;
      font-weight: bold;
      color: #fff;
      text-align: center;
      font-size: 14px;
    }
    .position-gk { background-color: #f0ad4e; }
    .position-cb { background-color: #5bc0de; }
    .position-lb { background-color: #5bc0de; }
    .position-rb { background-color: #5bc0de; }
    .position-dmf, .position-cmf, .position-lmf, .position-rmf, .position-amf { background-color: #5cb85c; }
    .position-ss, .position-lwf, .position-rwf, .position-cf { background-color: #d9534f; }

    /* Estilos para o switch */
    .theme-switch-wrapper {
      display: flex;
      align-items: center;
      margin-left: 15px;
    }
    .theme-switch {
      position: relative;
      display: inline-block;
      width: 60px;
      height: 34px;
    }
    .theme-switch input {
      opacity: 0;
      width: 0;
      height: 0;
    }
    .slider {
      position: absolute;
      cursor: pointer;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background-color: #ccc;
      transition: .4s;
      border-radius: 34px;
    }
    .slider:before {
      position: absolute;
      content: "";
      height: 26px;
      width: 26px;
      left: 4px;
      bottom: 4px;
      background-color: white;
      transition: .4s;
      border-radius: 50%;
    }
    input:checked + .slider {
      background-color: #2196F3;
    }
    input:checked + .slider:before {
      transform: translateX(26px);
    }
    .theme-icon {
      margin-left: 10px;
      font-size: 20px;
      transition: color 0.3s;
    }

    /* Temas claro e escuro aplicados via body */
    body.light-mode {
      background-color: #fff;
      color: #333;
    }
    body.dark-mode {
      background-color: #333;
      color: #fff;
    }
    body.light-mode .navbar {
      background-color: #f8f9fa !important;
    }
    body.dark-mode .navbar {
      background-color: #444 !important;
    }
    body.dark-mode .navbar-brand {
      color: #fff !important;
    }
    body.dark-mode .navbar-nav .nav-link {
      color: #fff !important;
    }

    body.dark-mode .navbar-toggler-icon {
      background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' width='30' height='30' viewBox='0 0 30 30'%3e%3cpath stroke='rgba(255, 255, 255, 0.8)' stroke-linecap='round' stroke-miterlimit='10' stroke-width='2' d='M4 7h22M4 15h22M4 23h22'/%3e%3c/svg%3e") !important;
    }

    body.dark-mode .navbar-toggler {
      border-color: rgba(255,255,255,.5) !important;
    }
    body.light-mode .footer {
      background-color: #f8f9fa !important;
      color: #6c757d;
    }
    body.dark-mode .footer {
      background-color: #444 !important;
      color: #ccc;
    }
    /* Ajuste do footer */
    .footer {
      flex-shrink: 0; /* Impede que o footer encolha */
      padding: 20px 0; /* Aumenta o padding para dar espaço interno */
      width: 100%;
    }
    /* Ajustes para tabelas */
    body.light-mode .table {
      color: #333;
      background-color: #fff;
    }
    body.dark-mode .table {
      color: #fff;
      background-color: #444;
    }
    body.dark-mode .table th,
    body.dark-mode .table td {
      border-color: #666;
    }
    body.dark-mode .table .thead-light th {
      background-color: #555;
      color: #fff;
    }
    /* Ajustes para paginação */
    body.light-mode .page-link {
      color: #007bff;
      background-color: #fff;
      border-color: #dee2e6;
    }
    body.light-mode .page-item.active .page-link {
      background-color: #007bff;
      border-color: #007bff;
      color: #fff;
    }
    body.dark-mode .page-link {
      color: #66b0ff;
      background-color: #555;
      border-color: #777;
    }
    body.dark-mode .page-item.active .page-link {
      background-color: #66b0ff;
      border-color: #66b0ff;
      color: #fff;
    }
    body.dark-mode .page-link:hover {
      background-color: #666;
      color: #fff;
    }
  </style>
  {% block extra_head %}{% endblock %}
</head>
<body class="light-mode">
  <nav class="navbar navbar-expand-lg navbar-light fixed-top">
    <a class="navbar-brand" href="/players"><strong>PlayersDB</strong></a>
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav" 
            aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarNav">
      <ul class="navbar-nav">
        <!--<li class="nav-item"><a class="nav-link" href="index.php">Home</a></li>-->
        <li class="nav-item"><a class="nav-link" href="/players">Players</a></li>
        <li class="nav-item"><a class="nav-link" href="#">Teams</a></li>
        <li class="nav-item"><a class="nav-link" href="/teditor">TEDitor</a></li>
        <li class="nav-item"><a class="nav-link" href="#">ID Converter</a></li>
        <li class="nav-item"><a class="nav-link" href="#">PESDB Scraping</a></li>
        <li class="nav-item"><a class="nav-link" href="/jsonlviewer">JSONL Viewer</a></li>
        <li class="nav-item"><a class="nav-link" href="#">About</a></li>
      </ul>
      <form class="form-inline ml-auto" method="GET" action="/players">
        <input class="form-control mr-sm-2" type="search" name="query" placeholder="Search by name or ID" aria-label="Search" value="{{ query }}">
        <button class="btn btn-outline-success my-2 my-sm-0" type="submit">Search</button>
      </form>
      <div class="theme-switch-wrapper">
        <label class="theme-switch" for="checkbox">
          <input type="checkbox" id="checkbox">
          <span class="slider"></span>
        </label>
        <i class="fa-solid fa-sun theme-icon"></i>
      </div>
    </div>
  </nav>
  <div class="container">
    {% block content %}{% endblock %}
  </div>
  <footer class="footer text-center py-3">
    <div class="container" style="margin-top: 0px;">
      <span>Players have been exported from the game <strong>eFootball 2025</strong></span><br>
      <span>(Last update: 2025/03/13)</span><br>
      <span>PlayersDB © {{ current_year }}</span>
    </div>
  </footer>
  <script src="https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/js/bootstrap.min.js"></script>
  <script>
    // Função para alternar o tema
    const toggleSwitch = document.querySelector('.theme-switch input[type="checkbox"]');
    const themeIcon = document.querySelector('.theme-icon');
    const body = document.body;
    const currentTheme = localStorage.getItem('theme') || 'light';

    // Aplicar o tema salvo ao carregar a página
    if (currentTheme === 'dark') {
      body.classList.remove('light-mode');
      body.classList.add('dark-mode');
      toggleSwitch.checked = true;
      themeIcon.classList.remove('fa-sun');
      themeIcon.classList.add('fa-moon');
    }

    // Alternar tema ao clicar no switch
    toggleSwitch.addEventListener('change', function() {
      if (this.checked) {
        body.classList.remove('light-mode');
        body.classList.add('dark-mode');
        themeIcon.classList.remove('fa-sun');
        themeIcon.classList.add('fa-moon');
        localStorage.setItem('theme', 'dark');
      } else {
        body.classList.remove('dark-mode');
        body.classList.add('light-mode');
        themeIcon.classList.remove('fa-moon');
        themeIcon.classList.add('fa-sun');
        localStorage.setItem('theme', 'light');
      }
    });
  </script>
</body>
</html>