{% extends "base.html" %}
{% block title %}Players List{% endblock %}
{% block content %}
  <h1>Players List</h1>
  <table class="table table-striped">
    <thead>
      <tr>
        <th style="width:100px;">Konami ID</th>
        <th style="width:100px;">FIFA ID</th>
        <th style="width:260px;">Player Name</th>
        <th style="width:300px;"">Team Name(s)</th>
      </tr>
    </thead>
    <tbody>
      {% for player in players %}
      <tr>
        <td>{{ player.konamiid }}</td>
        <td>{{ player.fifaid }}</td>
        <td>
          {% set reg_pos = player.registeredposition|int if player.registeredposition is not none else None %}
          {% set pos_reg = position_names.get(reg_pos, '') %}
          <span class="position-badge {{ position_classes.get(reg_pos, '') }}">{{ pos_reg }}</span>
          <a href="/player/{{ player.konamiid }}" class="player-link">{{ player.playername or '-' }}</a>
        </td>
        <td>{{ player.teamnames or '-' }}</td>
      </tr>
      {% endfor %}
    </tbody>
  </table>

  <!-- Paginação -->
  <nav aria-label="Page navigation">
    <ul class="pagination">
      {% if current_page > 1 %}
        <li class="page-item">
          <a class="page-link" href="{{ url_for('players', page=current_page - 1, query=query) }}">Anterior</a>
        </li>
      {% endif %}
      {% set start_page = current_page - 7 if (current_page - 7) > 1 else 1 %}
      {% set end_page = current_page + 7 if (current_page + 7) < total_pages else total_pages %}
      {% for p in range(start_page, end_page + 1) %}
        <li class="page-item {% if p == current_page %}active{% endif %}">
          <a class="page-link" href="{{ url_for('players', page=p, query=query) }}">{{ p }}</a>
        </li>
      {% endfor %}
      {% if current_page < total_pages %}
        <li class="page-item">
          <a class="page-link" href="{{ url_for('players', page=current_page + 1, query=query) }}">Próximo</a>
        </li>
      {% endif %}
    </ul>
  </nav>
{% endblock %}
